{
    "version": "{{ version|required('version') }}",
    "status": "{{ status|required('status') }}",
    "data": 
    [
        {%- for dset in data -%}
        {
            "id": "{{ dset.id|required('dataset[id]') }}",
            "default": "{{ dset.default }}",        
            "description": {{ dset.description|escape_chars }},
            "label": "{{ dset.label }}",
            "how_to_cite": "{{ dset.how_to_cite }}",
            "image": "{{ dset.image }}",
            "doi": "{{ dset.doi }}",
            "publication_date": "{{ dset.publication_date }}",
            "contact": {
                "name": "{{ dset.contact.name }}",
                "email": "{{ dset.contact.email }}",
                "webpage": "{{ dset.contact.webpage }}"
            },
            "license": {
                "name": "{{ dset.license.name }}",
                "url": "{{ dset.license.url }}"
            },
            "keywords": "{{ dset.keywords }}",
            "related_data":
            [
                {%- for data in dset.related_data -%}
                    {
                        "name": "{{ data.name }}",
                        "url": "{{ data.url }}"
                    }
                {{ ", " if not loop.last else "" }}
                {%- endfor -%}
            ],
            "products":
            [
                {%- for prod in dset.products -%}
                    {
                        "id": "{{ prod.id }}",
                        "label": "{{ prod.label }}"
                    }
                {{ ", " if not loop.last else "" }}
                {%- endfor -%}
            ]
        }
        {{ ", " if not loop.last else "" }}
        {%- endfor -%}        
    ]
}